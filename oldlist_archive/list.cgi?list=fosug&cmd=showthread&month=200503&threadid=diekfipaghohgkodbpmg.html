<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
<head>
<link href="../list/browse.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="list.cgi%3Flist=fosug&amp;cmd=feed&amp;feedtype=rss2" />
<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="list.cgi%3Flist=fosug&amp;cmd=feed&amp;feedtype=atom" />
<title>fosug: Thread: rm command</title>
<meta NAME="robots" CONTENT="noindex">
<meta NAME="robots" CONTENT="nofollow">
<base href="">
</head>
<body class=showthread-body>
<div class=menubar>
<a class="menu-lists" href="list.cgi.html">[Lists]</a>
<a class="menu-config" href="list.cgi%3Flist=fosug&amp;cmd=configure.html">[Configure]</a>
<a class="menu-first" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200410.html">[<<]</a>
<a class="menu-prev" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200502.html">[<]</a>
<a class="menu-bythread" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200503.html">[by Thread]</a>
<a class="menu-bydate" href="list.cgi%3Flist=fosug&amp;cmd=monthbydate&amp;month=200503.html">[by Date]</a>
<a class="menu-next" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200504.html">[>]</a>
<a class="menu-last" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200607.html">[>>]</a>
<a class="menu-months" href="list.cgi%3Flist=fosug&amp;cmd=months.html">[Months]</a>
<a class="menu-search" href="list.cgi%3Flist=fosug&amp;cmd=search.html">[Search]</a>
<a class="menu-subscribe" href="mailto:fosug-subscribe@fosug.org?subject=Just click SEND">[eSubscribe]</a>
<a class="feed-link" href="list.cgi%3Flist=fosug&amp;cmd=feed">[Feed]</a>
</div>
<hr>
<div class=showthread-title><h1>fosug: Thread: rm command</h1></div>
<hr>
<table class=msgs><tr><td colspan=99 class=pager>
<span class="pager-first">[<<]</span>
<span class="pager-prev">[<]</span>
<span class="pager-curr">Page 1 of 1</span>
<span class="pager-next">[>]</span>
<span class="pager-last">[>>]</span>
</td></tr><tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: rm command">rm command</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=oecidgpomioaadbpdhcp&amp;month=200503.html">Keith Conley ####@####.####</a>
<br><b>Date:</b>
3 Mar 2005 16:12:28 -0000
<br><b>Message-Id:</b> &lt;422737C6.9070904@drac0.net&gt;
<br>
<hr><pre>I have a 27 GB directory that I need to recursivly remove all files from 
EXCEPT .htm, .html, .asp, .php, .txt, .rpt

I'm not too good yet at using arugments with commands.

I need the command line equiv of this:
rm -r /path/to/folder/* except *.htm *.html *.asp *.php *.txt *.rpt

What would be the proper way of doing this?
I looked at the man page for rm, but it doesn't talk about exclusions.

Thanks in advance,

Keith
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: rm command">Re: rm command</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=jjaibmhcgncgkcebgmfd&amp;month=200503.html">Stevo ####@####.####</a>
<br><b>Date:</b>
3 Mar 2005 16:20:46 -0000
<br><b>Message-Id:</b> &lt;b9bd1f4d050303082037ae47a5@mail.gmail.com&gt;
<br>
<hr><pre>On Thu, 03 Mar 2005 10:13:58 -0600, Keith Conley ####@####.#### wrote:
&gt; I have a 27 GB directory that I need to recursivly remove all files from
&gt; EXCEPT .htm, .html, .asp, .php, .txt, .rpt
&gt; 
&gt; I'm not too good yet at using arugments with commands.
&gt; 
&gt; I need the command line equiv of this:
&gt; rm -r /path/to/folder/* except *.htm *.html *.asp *.php *.txt *.rpt
&gt; 
&gt; What would be the proper way of doing this?
&gt; I looked at the man page for rm, but it doesn't talk about exclusions.
&gt; 
&gt; Thanks in advance,
&gt; 
&gt; Keith


I'll give you a hint. You'll use rm in conjuction with the find
command. Let us know how you did it after you get the solution :-)
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: rm command">Re: rm command</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=oecidgpomioaadbpdhcp&amp;month=200503.html">Keith Conley ####@####.####</a>
<br><b>Date:</b>
3 Mar 2005 18:19:39 -0000
<br><b>Message-Id:</b> &lt;422755AA.2040401@drac0.net&gt;
<br>
<hr><pre>Stevo wrote:

&gt;On Thu, 03 Mar 2005 10:13:58 -0600, Keith Conley ####@####.#### wrote:
&gt;  
&gt;
&gt;&gt;
&gt;&gt;I need the command line equiv of this:
&gt;&gt;rm -r /path/to/folder/* except *.htm *.html *.asp *.php *.txt *.rpt
&gt;&gt;
&gt;&gt;What would be the proper way of doing this?
&gt;&gt;
&gt;&gt;    
&gt;&gt;
&gt;
&gt;
&gt;I'll give you a hint. You'll use rm in conjuction with the find
&gt;command. Let us know how you did it after you get the solution :-)
&gt;
&gt;  
&gt;
Well, here's what I found so far....

I would need to use find as you suggested along with a pattern string.  
Here's where I have no experiance is with bash.  I guess it's sad that 
I've been using linux this long and haven't had to use bash more then 
issueing a command here or there.

That said, the command string I'm looking for is going to be something 
simular to
find /path/to/files -name `!*.txt'|xargs rm

BUT when I try it on my test directory, it's not running.  I'll keep 
looking but any pointers would be appriciated.

</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: rm command">Re: rm command</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=jjaibmhcgncgkcebgmfd&amp;month=200503.html">Stevo ####@####.####</a>
<br><b>Date:</b>
3 Mar 2005 18:28:56 -0000
<br><b>Message-Id:</b> &lt;b9bd1f4d05030310284de3ee74@mail.gmail.com&gt;
<br>
<hr><pre>On Thu, 03 Mar 2005 12:21:30 -0600, Keith Conley ####@####.#### wrote:
&gt; Stevo wrote:
&gt; 
&gt; &gt;On Thu, 03 Mar 2005 10:13:58 -0600, Keith Conley ####@####.#### wrote:
&gt; &gt;
&gt; &gt;
&gt; &gt;&gt;
&gt; &gt;&gt;I need the command line equiv of this:
&gt; &gt;&gt;rm -r /path/to/folder/* except *.htm *.html *.asp *.php *.txt *.rpt
&gt; &gt;&gt;

since you were on the right track, here ya go.

******command*****
find ./ -type f|grep -v -E
'\.(htm)|(html)|(asp)|(php)|(txt)|(rpt)$'|xargs -i rm -i {}
*********************

notice try interactive first... just to see what it does.

Hope this helps. Isn't grep cool ;-)

Stevo
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: rm command">Re: rm command</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=kllfcpgdhhehicjdgkme&amp;month=200503.html">Robert Nickel ####@####.####</a>
<br><b>Date:</b>
3 Mar 2005 20:32:54 -0000
<br><b>Message-Id:</b> &lt;20050303203242.GD21869@homebase.hsd1.ca.comcast.net))&gt;
<br>
<hr><pre>On 2005.03.03 10:28:20 +0000, Stevo wrote:
&gt; On Thu, 03 Mar 2005 12:21:30 -0600, Keith Conley ####@####.#### wrote:
&gt; &gt; Stevo wrote:
&gt; &gt; 
&gt; &gt; &gt;On Thu, 03 Mar 2005 10:13:58 -0600, Keith Conley ####@####.#### wrote:
&gt; &gt; &gt;
&gt; &gt; &gt;
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt;I need the command line equiv of this:
&gt; &gt; &gt;&gt;rm -r /path/to/folder/* except *.htm *.html *.asp *.php *.txt *.rpt
&gt; &gt; &gt;&gt;
&gt; 
&gt; since you were on the right track, here ya go.
&gt; 
&gt; ******command*****
&gt; find ./ -type f|grep -v -E
&gt; '\.(htm)|(html)|(asp)|(php)|(txt)|(rpt)$'|xargs -i rm -i {}
&gt; *********************

find ./ -type f -maxdepth 1 ! -iname '*.htm' ! -iname '*.html' ...

But that sucks... Hmm.. What about this:

find . -type f | sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\)$/d' | xargs -i rm -i {}

Do I get a brownie for making it short?

:-)

&gt; Hope this helps. Isn't grep cool ;-)

Oh, c'mon, it's just a subset of sed!  ;-)

--Robert
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: rm command">Re: rm command</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=aimdboopeclckeolemjn&amp;month=200503.html">Mike ####@####.####</a>
<br><b>Date:</b>
3 Mar 2005 20:50:12 -0000
<br><b>Message-Id:</b> &lt;f73f9abd050303124918baf1a2@mail.gmail.com&gt;
<br>
<hr><pre>You guys are Awesome!

-Mike



On Thu, 3 Mar 2005 12:32:42 -0800, Robert Nickel ####@####.#### wrote:
&gt; On 2005.03.03 10:28:20 +0000, Stevo wrote:
&gt; &gt; On Thu, 03 Mar 2005 12:21:30 -0600, Keith Conley ####@####.#### wrote:
&gt; &gt; &gt; Stevo wrote:
&gt; &gt; &gt;
&gt; &gt; &gt; &gt;On Thu, 03 Mar 2005 10:13:58 -0600, Keith Conley ####@####.#### wrote:
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;
&gt; &gt; &gt; &gt;&gt;
&gt; &gt; &gt; &gt;&gt;I need the command line equiv of this:
&gt; &gt; &gt; &gt;&gt;rm -r /path/to/folder/* except *.htm *.html *.asp *.php *.txt *.rpt
&gt; &gt; &gt; &gt;&gt;
&gt; &gt;
&gt; &gt; since you were on the right track, here ya go.
&gt; &gt;
&gt; &gt; ******command*****
&gt; &gt; find ./ -type f|grep -v -E
&gt; &gt; '\.(htm)|(html)|(asp)|(php)|(txt)|(rpt)$'|xargs -i rm -i {}
&gt; &gt; *********************
&gt; 
&gt; find ./ -type f -maxdepth 1 ! -iname '*.htm' ! -iname '*.html' ...
&gt; 
&gt; But that sucks... Hmm.. What about this:
&gt; 
&gt; find . -type f | sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\)$/d' | xargs -i rm -i {}
&gt; 
&gt; Do I get a brownie for making it short?
&gt; 
&gt; :-)
&gt; 
&gt; &gt; Hope this helps. Isn't grep cool ;-)
&gt; 
&gt; Oh, c'mon, it's just a subset of sed!  ;-)
&gt; 
&gt; --Robert
&gt; 


-- 
Thanks,

-Mike
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: rm command">Re: rm command</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=jjaibmhcgncgkcebgmfd&amp;month=200503.html">Stevo ####@####.####</a>
<br><b>Date:</b>
3 Mar 2005 21:07:20 -0000
<br><b>Message-Id:</b> &lt;b9bd1f4d0503031306553d473a@mail.gmail.com&gt;
<br>
<hr><pre>&gt; &gt;
&gt; &gt; find ./ -type f -maxdepth 1 ! -iname '*.htm' ! -iname '*.html' ...

Yup... that sucks.

&gt; &gt;
&gt; &gt; But that sucks... Hmm.. What about this:
&gt; &gt;
&gt; &gt; find . -type f | sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\)$/d' | xargs -i rm -i {}
&gt; &gt;
&gt; &gt; Do I get a brownie for making it short?

Gives Rob a special brownie.

&gt; &gt;
&gt; &gt; :-)
&gt; &gt;
&gt; &gt; &gt; Hope this helps. Isn't grep cool ;-)
&gt; &gt;
&gt; &gt; Oh, c'mon, it's just a subset of sed!  ;-)

Is it really? I didn't know that. I'm actually messing with it right
now. I found some obnoxious MS naming conventions that got in the way.
This is what I have so far but it isn't working right.

find ./ -type f| \
sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)$/d' \
-e 's/ /\\\ /g' \
-e 's/\\(/\\\(/g' \
-e 's/\\)/\\\)/g' \
-e &quot;s/'/\\\'/g&quot; \
-e &quot;s/\\[/\\\[/g&quot; \
-e 's/\\]/\\\]/g' \
-e 's/\&amp;/\\\&amp;/g' \
-e 's/\\$/\\\$/g' \
-e 's/\;/\\\;/g' \
-e 's/:/\\\:/g' \
-e 's/\`/\\\`/g' \
-e 's/\%/\\\%/g' \
-e 's/\#/\\\#/g'| \
xargs -i rm -f {}

&gt; &gt;
&gt; &gt; --Robert
&gt; &gt;

You da man Rob :-)
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: rm command">Re: rm command</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=kllfcpgdhhehicjdgkme&amp;month=200503.html">Robert Nickel ####@####.####</a>
<br><b>Date:</b>
4 Mar 2005 21:10:07 -0000
<br><b>Message-Id:</b> &lt;20050304210955.GK21869@homebase.hsd1.ca.comcast.net))&gt;
<br>
<hr><pre>On 2005.03.03 13:06:42 +0000, Stevo wrote:
&gt; &gt; &gt; find ./ -type f -maxdepth 1 ! -iname '*.htm' ! -iname '*.html' ...
&gt; 
&gt; Yup... that sucks.
&gt; 
[...]
&gt; Gives Rob a special brownie.

&lt;blush&gt;
[...]
&gt; Is it really? I didn't know that. I'm actually messing with it right
&gt; now. I found some obnoxious MS naming conventions that got in the way.
&gt; This is what I have so far but it isn't working right.

I truly don't know if it is *technically* a subset of sed, but you can do
everything grep does with sed.  So, functionally speaking, yes it is.

&gt; I'm actually messing with it right now. I found some obnoxious MS naming
&gt; conventions that got in the way.  This is what I have so far but it isn't
&gt; working right.
&gt;
&gt; find ./ -type f| \
&gt; sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)$/d' \
&gt; -e 's/ /\\\ /g' \
&gt; -e 's/\\(/\\\(/g' \
&gt; -e 's/\\)/\\\)/g' \
&gt; -e &quot;s/'/\\\'/g&quot; \
&gt; -e &quot;s/\\[/\\\[/g&quot; \
&gt; -e 's/\\]/\\\]/g' \
&gt; -e 's/\&amp;/\\\&amp;/g' \
&gt; -e 's/\\$/\\\$/g' \
&gt; -e 's/\;/\\\;/g' \
&gt; -e 's/:/\\\:/g' \
&gt; -e 's/\`/\\\`/g' \
&gt; -e 's/\%/\\\%/g' \
&gt; -e 's/\#/\\\#/g'| \
&gt; xargs -i rm -f {}

Wow!  That's *really* ugly.  Let's apply a little bash-fu here.

find ./ -type f -printf &quot;'%f'\n&quot; | 
sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)$/d' | \
xargs -i rm -f {}

By using single quotes, we prevent the shell expansion/interpretation of the
specials.  I think that should take care of all of them.

Test it like this: 
  
  echo '[] ;%#:$()\'

to see if the character you're interested in is safe inside the single quote.
It *should* fix you up.

--Robert
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: rm command">Re: rm command</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=kllfcpgdhhehicjdgkme&amp;month=200503.html">Robert Nickel ####@####.####</a>
<br><b>Date:</b>
4 Mar 2005 21:22:54 -0000
<br><b>Message-Id:</b> &lt;20050304212242.GL21869@homebase.hsd1.ca.comcast.net))&gt;
<br>
<hr><pre>On 2005.03.04 13:09:55 +0000, Robert Nickel wrote:
&gt; find ./ -type f -printf &quot;'%f'\n&quot; | 
&gt; sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)$/d' | \
&gt; xargs -i rm -f {}

Oh.  Oops.  That's not good.  Not good at all.  Lot's of errors!

change teh find line to:

find ./ -type f -printf &quot;'%h/%f'\n&quot; | \

I forgot the path and the escape at the end of the find line.

Doh!

--Robert
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: rm command">Re: rm command</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=jjaibmhcgncgkcebgmfd&amp;month=200503.html">Stevo ####@####.####</a>
<br><b>Date:</b>
4 Mar 2005 21:32:54 -0000
<br><b>Message-Id:</b> &lt;b9bd1f4d05030413323bdb2f95@mail.gmail.com&gt;
<br>
<hr><pre>&gt; find ./ -type f -printf &quot;'%h/%f'\n&quot; | \
&gt; 
&gt; I forgot the path and the escape at the end of the find line.
&gt; 
&gt; Doh!
&gt; 
&gt; --Robert
&gt; 

You are awsome Rob. I've wanted to know how to do this often. I
learned something valueable from that last post.

*bows down*

Cheers,

Stevo
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: rm command">Re: rm command</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=oecidgpomioaadbpdhcp&amp;month=200503.html">Keith Conley ####@####.####</a>
<br><b>Date:</b>
4 Mar 2005 23:13:24 -0000
<br><b>Message-Id:</b> &lt;4228EBFF.5060509@drac0.net&gt;
<br>
<hr><pre>Robert Nickel wrote:

&gt;On 2005.03.04 13:09:55 +0000, Robert Nickel wrote:
&gt;  
&gt;
&gt;&gt;find ./ -type f -printf &quot;'%f'\n&quot; | 
&gt;&gt;sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)$/d' | \
&gt;&gt;xargs -i rm -f {}
&gt;&gt;    
&gt;&gt;
&gt;
&gt;Oh.  Oops.  That's not good.  Not good at all.  Lot's of errors!
&gt;
&gt;change teh find line to:
&gt;
&gt;find ./ -type f -printf &quot;'%h/%f'\n&quot; | \
&gt;
&gt;I forgot the path and the escape at the end of the find line.
&gt;
&gt;Doh!
&gt;
&gt;--Robert
&gt;  
&gt;
Robert,

Send more of your God like knowledge my way!  Thank you for the help 
with this.  I would have eventually gotten it but it would have taken me 
a long time, and it probably would have been very ugly (uglier then what 
you said stevo's solution is...)

Thanks to you too, Stevo, you got me pointed in the right direction.

Got any good books for bash you'd all like to recommend?  I need to get 
more familiar with it.

Keith
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: rm command">Re: rm command</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=jjaibmhcgncgkcebgmfd&amp;month=200503.html">Stevo ####@####.####</a>
<br><b>Date:</b>
5 Mar 2005 00:07:22 -0000
<br><b>Message-Id:</b> &lt;b9bd1f4d050304160722029b50@mail.gmail.com&gt;
<br>
<hr><pre>&gt; 
&gt; Thanks to you too, Stevo, you got me pointed in the right direction.
&gt; 
&gt; Got any good books for bash you'd all like to recommend?  I need to get
&gt; more familiar with it.
&gt; 
&gt; Keith
&gt; 
You're welcome Bud. I've heard Robert say numerous times that the bash
man page is over 200 pages long. A lot of good information hidden away
in there. I don't know of anybody silly enough to read it. I've
perused it a few times and each time have learned something new. You
may want to give that a try. I'd check out some O'Reilly books at the
bookstore too, if you wanted the guided tour by one of their many
wonderful tech books.

How are things in Florida?

Cheers,

Stevo
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: rm command">Re: rm command</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=kllfcpgdhhehicjdgkme&amp;month=200503.html">Robert Nickel ####@####.####</a>
<br><b>Date:</b>
5 Mar 2005 00:57:08 -0000
<br><b>Message-Id:</b> &lt;20050305005648.GM21869@homebase.hsd1.ca.comcast.net))&gt;
<br>
<hr><pre>On 2005.03.04 17:15:11 +0000, Keith Conley wrote:
[...]
&gt; Send more of your God like knowledge my way!  

Bah!  I still feel like a pleb.

&gt; Thank you for the help with this.  I would have eventually gotten it but it
&gt; would have taken me a long time, and it probably would have been very ugly
&gt; (uglier then what you said stevo's solution is...)

Welcome.

&gt; Thanks to you too, Stevo, you got me pointed in the right direction.
&gt; 
&gt; Got any good books for bash you'd all like to recommend?  I need to get 
&gt; more familiar with it.

Unix Shells by Example
<a href="http://www.bookpool.com/sm/013147572X">http://www.bookpool.com/sm/013147572X</a>

If you buy just one unix book *ever*, it should be this one.  Good shell code
examples.  Explanation of the pros/cons of different shells (even a nice
history of shells).  Hell, there's even a good chapter on regular expressions
and sed!

--Robert
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: rm command">Re: rm command</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=oecidgpomioaadbpdhcp&amp;month=200503.html">Keith Conley ####@####.####</a>
<br><b>Date:</b>
5 Mar 2005 08:39:14 -0000
<br><b>Message-Id:</b> &lt;422970A6.4030701@drac0.net&gt;
<br>
<hr><pre>Robert Nickel wrote:

&gt;On 2005.03.04 13:09:55 +0000, Robert Nickel wrote:
&gt;  
&gt;
&gt;&gt;find ./ -type f -printf &quot;'%h/%f'\n&quot; | \ 
&gt;&gt;sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)$/d' | \
&gt;&gt;xargs -i rm -f {}
&gt;&gt;    
&gt;&gt;
&gt;--Robert
&gt;
&gt;  
&gt;
Alright, so I finally got a chance to run this on my directory... Here's 
what happened:

reports]# find ./ -type f -printf &quot;'%h/%f'\n&quot; | \
 &gt; sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)$/d' | \
 &gt; xargs -i rm -f {}
xargs: unmatched single quote

I started googling around and found that this error is happening because 
there are probably files in one or possibley all directories that have a 
' (single quote) in the file name.

Using &quot;'%h/%f\'\n&quot; works, but appends a ' to the end of every file name.
I also found out that -print0 will do the same thing as what you are 
doing with -printf &quot;'%h/%f'\n&quot;.  Are there any pros or cons to doing it 
one way or the other?
I noticed that there is no -i for xargs... I'm assuming the -i was to 
make it interactive.  The -p or --interactive options make it interactive.

I ran the script again, it went through 28500 or so files, but nothing 
was deleted.

find ./ -type f -print0 | \
sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)$/d' | \
xargs -p rm -f {}

When running the script without rm -f {} outputs everything to /bin/echo 
by default.  Here is what the output looks like from the above script 
(without rm -f {}):

./Customer Sales/Paulis Lawnmower Sales History.xls 01017391 01017456 
08004408.eml POs/ 01011182 &amp; 01011055.eml 01014767 &amp; 01014845.eml POs/ 
01015229, 08003948, 01015135.eml 01017558.eml POs/ 01017966.eml 
01018534.eml POs/ 01019512.eml 01020799.eml POs/ 02004008.eml 08004175, 
01016184, 01016185.eml POs/ PO 01011563.eml PO 01011804.eml POs/ PO 
01012235.eml PO 01012570.eml POs/ PO 01015484.eml PO 01016756 &amp; 
01016679.eml POs/ PO 01016944.eml PO 01017230.eml POs/ PO 01018169.eml 
PO 01018913.eml POs/ PO 08003355.eml RA 23456.eml POs/01009031.eml 
POs/01009744 .eml .eml POs/01015772.eml POs/01017669.eml 
POs/01020083.eml POs/01020560.eml POs/01021427.eml POs/08004560, 
08004537, 08004536, 01018247.eml POs/08004911.eml POs/2-stroke 
campaign.eml Dealer Survey.eml POs/Booking Discount.eml Promotion.eml 
POs/DROP SHIPS.eml POs/ECHO Parts.eml

  Should each file be listed seperately on it's own line? 

I tried it with xargs --null because the xargs man page says that 
-print0 produces input suitable for --null. 

find ./ -type f -print0 | \
sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)$/d' | \
xargs --null rm -f {}

This actually deleted ALL contents from the directories, including those 
that need to be excluded.

I'm pretty tired now and I feel like I'm going to go blind reading man 
pages... lol  I've learned a lot tonight, but do you have any 
recommendations on what I should try next?

Thanks,

Keith
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: rm command">Re: rm command</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=kllfcpgdhhehicjdgkme&amp;month=200503.html">Robert Nickel ####@####.####</a>
<br><b>Date:</b>
5 Mar 2005 23:52:09 -0000
<br><b>Message-Id:</b> &lt;20050305235149.GY21869@homebase.hsd1.ca.comcast.net))&gt;
<br>
<hr><pre>On 2005.03.05 02:41:10 +0000, Keith Conley wrote:
&gt; Robert Nickel wrote:
&gt; &gt;&gt;find ./ -type f -printf &quot;'%h/%f'\n&quot; | \ 
&gt; &gt;&gt;sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)$/d' | \
&gt; &gt;&gt;xargs -i rm -f {}
[...]
&gt; Alright, so I finally got a chance to run this on my directory... Here's 
&gt; what happened:
&gt; 
&gt; reports]# find ./ -type f -printf &quot;'%h/%f'\n&quot; | \
&gt; &gt; sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)$/d' | \
&gt; &gt; xargs -i rm -f {}
&gt; xargs: unmatched single quote

Yeah.  That sed script isn't right either.  The script doesn't account for the
trailing single quote.  Sorry man.  The thing should look more like this:

sed -e &quot;/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)'$/d&quot; | \

&gt; I started googling around and found that this error is happening because 
&gt; there are probably files in one or possibley all directories that have a 
&gt; ' (single quote) in the file name.

Ugh.  That's a whole new problem!  You're just full of good news.  I'd use
find to sort those files out individually and zap/rename them up front.

find . -name '*&quot;*'

&gt; Using &quot;'%h/%f\'\n&quot; works, but appends a ' to the end of every file name.
&gt; I also found out that -print0 will do the same thing as what you are 
&gt; doing with -printf &quot;'%h/%f'\n&quot;.  Are there any pros or cons to doing it 
&gt; one way or the other?

No.  -print0 and -printf &quot;'%h/%f'\n&quot; are not equivalent.  \n is a newline and
-print0 null separates the fields.  You *must* use the -0,--null option to
xargs to use this and doing so will blast the sed script (which appears wrong
to me now).

&gt; I noticed that there is no -i for xargs... I'm assuming the -i was to 
&gt; make it interactive.  The -p or --interactive options make it interactive.

Looking in the wrong place there for the interactive bit.

From man rm:

-i Prompt for confirmation.  (In case both -f and -i are given, the last
   one given takes effect.)

The -i to xargs does other stuff.  It's in there.

&gt; I ran the script again, it went through 28500 or so files, but nothing 
&gt; was deleted.
&gt; 
&gt; find ./ -type f -print0 | \
&gt; sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)$/d' | \
&gt; xargs -p rm -f {}
&gt; 
[...]
&gt; I tried it with xargs --null because the xargs man page says that 
&gt; -print0 produces input suitable for --null. 
&gt; 
&gt; find ./ -type f -print0 | \
&gt; sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)$/d' | \
&gt; xargs --null rm -f {}
&gt; 
&gt; This actually deleted ALL contents from the directories, including those 
&gt; that need to be excluded.

Yes, in addition to the sed being broken due to the single quote, the sed
script is looking for the end of line marker that no longer exists between
each file with -print0 in effect.  To do it this way, kinda changes the rules
some.  You need to have something that splits the list up again but this time
on null.

Something like this:

find ./ -type f -print0 | tr \\0 \\n | \...

Problem with that is that you end up back where you started with the -printf.

&gt; I'm pretty tired now and I feel like I'm going to go blind reading man 
&gt; pages... lol  I've learned a lot tonight, but do you have any 
&gt; recommendations on what I should try next?

lol.  Welcome to my life.

I'd recommend finding any files with double quotes in the file system tree
that you're interested in and rename those first.  Then use double quotes
instead of single quotes on the printf.

find . -type f -printf '&quot;%h/%f&quot;\n' | \
sed -e &quot;/\.\(...\)\&quot;$/d&quot; | xargs rm -i 

--Robert
</pre>

<tr><td colspan=99 class=pager>
<span class="pager-first">[<<]</span>
<span class="pager-prev">[<]</span>
<span class="pager-curr">Page 1 of 1</span>
<span class="pager-next">[>]</span>
<span class="pager-last">[>>]</span>
</td></tr></table><hr><div class=menubar>
<a class="menu-lists" href="list.cgi.html">[Lists]</a>
<a class="menu-config" href="list.cgi%3Flist=fosug&amp;cmd=configure.html">[Configure]</a>
<a class="menu-first" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200410.html">[<<]</a>
<a class="menu-prev" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200502.html">[<]</a>
<a class="menu-bythread" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200503.html">[by Thread]</a>
<a class="menu-bydate" href="list.cgi%3Flist=fosug&amp;cmd=monthbydate&amp;month=200503.html">[by Date]</a>
<a class="menu-next" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200504.html">[>]</a>
<a class="menu-last" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200607.html">[>>]</a>
<a class="menu-months" href="list.cgi%3Flist=fosug&amp;cmd=months.html">[Months]</a>
<a class="menu-search" href="list.cgi%3Flist=fosug&amp;cmd=search.html">[Search]</a>
<a class="menu-subscribe" href="mailto:fosug-subscribe@fosug.org?subject=Just click SEND">[eSubscribe]</a>
<a class="feed-link" href="list.cgi%3Flist=fosug&amp;cmd=feed">[Feed]</a>
</div>

<hr>
<div class=versioninfo>
Powered by
<a href="http://untroubled.org/ezmlm-browse/">ezmlm-browse 0.10</a>.
</div>
</body>
</html>
