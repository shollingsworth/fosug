<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
<head>
<link href="../list/browse.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="list.cgi%3Flist=fosug&amp;cmd=feed&amp;feedtype=rss2" />
<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="list.cgi%3Flist=fosug&amp;cmd=feed&amp;feedtype=atom" />
<title>fosug: Thread: SWAP!!!! (kind of like yelling fire---but not)</title>
<meta NAME="robots" CONTENT="noindex">
<meta NAME="robots" CONTENT="nofollow">
<base href="">
</head>
<body class=showthread-body>
<div class=menubar>
<a class="menu-lists" href="list.cgi.html">[Lists]</a>
<a class="menu-config" href="list.cgi%3Flist=fosug&amp;cmd=configure.html">[Configure]</a>
<a class="menu-first" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200410.html">[<<]</a>
<a class="menu-prev" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200502.html">[<]</a>
<a class="menu-bythread" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200503.html">[by Thread]</a>
<a class="menu-bydate" href="list.cgi%3Flist=fosug&amp;cmd=monthbydate&amp;month=200503.html">[by Date]</a>
<a class="menu-next" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200504.html">[>]</a>
<a class="menu-last" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200607.html">[>>]</a>
<a class="menu-months" href="list.cgi%3Flist=fosug&amp;cmd=months.html">[Months]</a>
<a class="menu-search" href="list.cgi%3Flist=fosug&amp;cmd=search.html">[Search]</a>
<a class="menu-subscribe" href="mailto:fosug-subscribe@fosug.org?subject=Just click SEND">[eSubscribe]</a>
<a class="feed-link" href="list.cgi%3Flist=fosug&amp;cmd=feed">[Feed]</a>
</div>
<hr>
<div class=showthread-title><h1>fosug: Thread: SWAP!!!! (kind of like yelling fire---but not)</h1></div>
<hr>
<table class=msgs><tr><td colspan=99 class=pager>
<span class="pager-first">[<<]</span>
<span class="pager-prev">[<]</span>
<span class="pager-curr">Page 1 of 1</span>
<span class="pager-next">[>]</span>
<span class="pager-last">[>>]</span>
</td></tr><tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: SWAP!!!! (kind of like yelling fire---but not)">SWAP!!!! (kind of like yelling fire---but not)</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=jjaibmhcgncgkcebgmfd&amp;month=200503.html">Stevo ####@####.####</a>
<br><b>Date:</b>
25 Mar 2005 02:13:36 -0000
<br><b>Message-Id:</b> &lt;b9bd1f4d05032418136ffa45e9@mail.gmail.com&gt;
<br>
<hr><pre>Thought I'd share.

I seriously had a kind of I think I'm going to be sick feeling in my
stomach when I saw this. If you know the physical device of your swap
partition.

Do this on a frequently used machine.

#swapoff /dev/hda8
# cat /dev/hda8|strings|less

so cat your swap partition to standard output, only print readable
characters, and page it so you can read it one screen at a time.

You'll see all sorts of lovely things fly by... such as visited URL's,
kernel messages, and *gasp* passwords. Yup boys and girls. It's a very
ugly thing.

So I'd suggest this.

<a href="http://www.google.com/search?hl=en&amp;q=dm-crypt+swap&amp;btnG=Google+Search">http://www.google.com/search?hl=en&amp;q=dm-crypt+swap&amp;btnG=Google+Search</a>
<a href="http://www.saout.de/misc/dm-crypt/">http://www.saout.de/misc/dm-crypt/</a>

I've been playing with dm-crypt. Actually my home partition is mounted
with it. And I must say I like it a lot.

This page gave me a simple kick in the butt. (if you like gentoo)
Of course there are a ton of other references out there.

<a href="http://gentoo-wiki.com/Special:Search?search=dm-crypt&amp;fulltext=Search">http://gentoo-wiki.com/Special:Search?search=dm-crypt&amp;fulltext=Search</a>

I didn't see much of a performance hit. And the beautiful thing is the
passphrase holds the seed. So you can enter any passphrase you want.
It's just not going to yield a reiserfs formated drive. It'd be more
along the lines of a ASCII or /dev/urandom joke.

So anyhow boys and girls of FOSUG. I thought I'd share. I've had a lot
of fun playing with crypto stuff the past few days.

I know all of you are *so* interested in this. Well, maybe a few. So
this is more for the benefit of those who are. But it's good to know
this is out there.

Cheers,

Stevo
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: SWAP!!!! (kind of like yelling fire---but not)">Re: SWAP!!!! (kind of like yelling fire---but not)</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=dobfilgiepfbombnfajo&amp;month=200503.html">Elliott Johnson ####@####.####</a>
<br><b>Date:</b>
25 Mar 2005 07:29:36 -0000
<br><b>Message-Id:</b> &lt;20050325073320.GA3598@mail.fasl.info&gt;
<br>
<hr><pre>Hey Stevo,

Good post.  I do believe you're paranoid, but I've been meaning to
learn how to setup encrypted file-systems.  I'll start with those
links.  Thanks man.

Just wondering, wouldn't someone need root access to grok the swap
partition anyway?  Not that it makes things anymore safe, but it seems
if someone already had root access they wouldn't even need to look in
swap.

Later,
Elliott
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: SWAP!!!! (kind of like yelling fire---but not)">Re: SWAP!!!! (kind of like yelling fire---but not)</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=jjaibmhcgncgkcebgmfd&amp;month=200503.html">Stevo ####@####.####</a>
<br><b>Date:</b>
25 Mar 2005 13:12:14 -0000
<br><b>Message-Id:</b> &lt;b9bd1f4d050325051260862da9@mail.gmail.com&gt;
<br>
<hr><pre>Elliot Speaketh---

On Thu, 24 Mar 2005 23:33:20 -0800, Elliott Johnson ####@####.#### wrote:
&gt; Hey Stevo,
&gt; 
&gt; Good post.  I do believe you're paranoid, but I've been meaning to
&gt; learn how to setup encrypted file-systems.  I'll start with those
&gt; links.  Thanks man.

Heh... Not necessarily paranoid, call it curious. I was thinking about
what swap is, and what could possibly be in there. I also saw
something on a security mailing list about pam putting some passwords
in the swap partition in plain text. So I decided to check. It was a
little more revealing than I thought. Initially I figured I'd get very
little ledgible text. But there was tons.

&gt; Just wondering, wouldn't someone need root access to grok the swap
&gt; partition anyway?  Not that it makes things anymore safe, but it seems
&gt; if someone already had root access they wouldn't even need to look in
&gt; swap.

I believe to access a device directly like that they would. Or if the
user had permissions to the device.

brw-------  1 root root 3, 8 Dec 31  1969 /dev/ide/host0/bus0/target0/lun0/part8

That is what I got. (read/write by root only) The cat command didn't
work as a regular user, obviously.

Now the security risk lies in the fact that this is what's stored in
RAM not your hard disk. What we type on our keyboard, programs run
through their cache, into memory, blah blah blah... all run through
RAM. So if we somehow run out of physical RAM it swaps. So depending
on how to program handles it's paging process, and whether or not it's
encrypted, many times the keystrokes, or process information reside on
the swap disk in plain text. Booting up with a knoppix cd, and piping
the command to a text file would yeild the same results. If the
partition is encrypted with a random key each time we don't even have
to worry about it. Every time we boot it has a different seed pulled
from /dev/urandom.

Cheers,

Stevo

PS: I'm learning this stuff as I go along guys, so if I say something
that isn't true, please, by all means correct me (Robert never has a
problem with that) :-P
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: SWAP!!!! (kind of like yelling fire---but not)">Re: SWAP!!!! (kind of like yelling fire---but not)</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=kllfcpgdhhehicjdgkme&amp;month=200503.html">Robert Nickel ####@####.####</a>
<br><b>Date:</b>
25 Mar 2005 18:14:08 -0000
<br><b>Message-Id:</b> &lt;20050325181358.GC23748@homebase.hsd1.ca.comcast.net))&gt;
<br>
<hr><pre>On 2005.03.24 18:13:21 +0000, Stevo wrote:
&gt; Thought I'd share.
[...]
&gt; You'll see all sorts of lovely things fly by... such as visited URL's,
&gt; kernel messages, and *gasp* passwords. Yup boys and girls. It's a very
&gt; ugly thing.

Ok.  I have questions.  The passwords that you found; where were they from?

Were they web page passwords or were they from PAM or SSH or GNUPG?

If they're from the web, no biggie.  You shouldn't be using anything on the
web that you'll miss anyway.  If they're from PAM/SSH/GNUPG, then you've got
something funky going on.  Each of these should lock pages in memory so that
they _cannot_ be swapped.

I was unable to duplicate your findings on my lappy or on my home box.

I _do_ agree that encrypting the swap is a good thing so that you can keep
your pr0n habits a secret, though. ;-)

--Robert
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: SWAP!!!! (kind of like yelling fire---but not)">Re: SWAP!!!! (kind of like yelling fire---but not)</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=jjaibmhcgncgkcebgmfd&amp;month=200503.html">Stevo ####@####.####</a>
<br><b>Date:</b>
25 Mar 2005 18:20:53 -0000
<br><b>Message-Id:</b> &lt;b9bd1f4d0503251020603ed76b@mail.gmail.com&gt;
<br>
<hr><pre>Rob Says...

On Fri, 25 Mar 2005 10:13:58 -0800, Robert Nickel ####@####.#### wrote:
&gt; On 2005.03.24 18:13:21 +0000, Stevo wrote:
&gt; &gt; Thought I'd share.
&gt; [...]
&gt; &gt; You'll see all sorts of lovely things fly by... such as visited URL's,
&gt; &gt; kernel messages, and *gasp* passwords. Yup boys and girls. It's a very
&gt; &gt; ugly thing.
&gt; 
&gt; Ok.  I have questions.  The passwords that you found; where were they from?
&gt; 
&gt; Were they web page passwords or were they from PAM or SSH or GNUPG?
&gt; 
&gt; If they're from the web, no biggie.  You shouldn't be using anything on the
&gt; web that you'll miss anyway.  If they're from PAM/SSH/GNUPG, then you've got
&gt; something funky going on.  Each of these should lock pages in memory so that
&gt; they _cannot_ be swapped.

They were along the lines of ftp and web stuff. I too didn't find any
PAM/SSH passwords. So I don't think there is a worry about that. I'll
try and dig up the link on PAM and SWAP vulnerbility though. I
remember reading something specific upon those lines, and did the
research myself. Hence the post. I was messing with dm-crypt and
thought it might be cool to dig through the swap partition and see
what kind of stuff is stored on there.

&gt; 
&gt; I was unable to duplicate your findings on my lappy or on my home box.
&gt; 
&gt; I _do_ agree that encrypting the swap is a good thing so that you can keep
&gt; your pr0n habits a secret, though. ;-)

Yes, it is a good thing, and it's easy too. Can't be too careful. I
was just a little suprised at the results. I thought it would have
been _all_ garbled, with very little legible text, pointers, etc.

Best of all... my pr0n is safe now! *insert evil laugh here*

j/k

Cheers,

Stevo
</pre>

<tr><td colspan=99 class=pager>
<span class="pager-first">[<<]</span>
<span class="pager-prev">[<]</span>
<span class="pager-curr">Page 1 of 1</span>
<span class="pager-next">[>]</span>
<span class="pager-last">[>>]</span>
</td></tr></table><hr><div class=menubar>
<a class="menu-lists" href="list.cgi.html">[Lists]</a>
<a class="menu-config" href="list.cgi%3Flist=fosug&amp;cmd=configure.html">[Configure]</a>
<a class="menu-first" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200410.html">[<<]</a>
<a class="menu-prev" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200502.html">[<]</a>
<a class="menu-bythread" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200503.html">[by Thread]</a>
<a class="menu-bydate" href="list.cgi%3Flist=fosug&amp;cmd=monthbydate&amp;month=200503.html">[by Date]</a>
<a class="menu-next" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200504.html">[>]</a>
<a class="menu-last" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200607.html">[>>]</a>
<a class="menu-months" href="list.cgi%3Flist=fosug&amp;cmd=months.html">[Months]</a>
<a class="menu-search" href="list.cgi%3Flist=fosug&amp;cmd=search.html">[Search]</a>
<a class="menu-subscribe" href="mailto:fosug-subscribe@fosug.org?subject=Just click SEND">[eSubscribe]</a>
<a class="feed-link" href="list.cgi%3Flist=fosug&amp;cmd=feed">[Feed]</a>
</div>

<hr>
<div class=versioninfo>
Powered by
<a href="http://untroubled.org/ezmlm-browse/">ezmlm-browse 0.10</a>.
</div>
</body>
</html>
