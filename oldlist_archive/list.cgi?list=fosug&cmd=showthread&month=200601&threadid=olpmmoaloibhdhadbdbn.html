<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
<head>
<link href="../list/browse.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="list.cgi%3Flist=fosug&amp;cmd=feed&amp;feedtype=rss2" />
<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="list.cgi%3Flist=fosug&amp;cmd=feed&amp;feedtype=atom" />
<title>fosug: Thread: bsd network bridge</title>
<meta NAME="robots" CONTENT="noindex">
<meta NAME="robots" CONTENT="nofollow">
<base href="">
</head>
<body class=showthread-body>
<div class=menubar>
<a class="menu-lists" href="list.cgi.html">[Lists]</a>
<a class="menu-config" href="list.cgi%3Flist=fosug&amp;cmd=configure.html">[Configure]</a>
<a class="menu-first" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200410.html">[<<]</a>
<a class="menu-prev" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200512.html">[<]</a>
<a class="menu-bythread" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200601.html">[by Thread]</a>
<a class="menu-bydate" href="list.cgi%3Flist=fosug&amp;cmd=monthbydate&amp;month=200601.html">[by Date]</a>
<a class="menu-next" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200603.html">[>]</a>
<a class="menu-last" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200607.html">[>>]</a>
<a class="menu-months" href="list.cgi%3Flist=fosug&amp;cmd=months.html">[Months]</a>
<a class="menu-search" href="list.cgi%3Flist=fosug&amp;cmd=search.html">[Search]</a>
<a class="menu-subscribe" href="mailto:fosug-subscribe@fosug.org?subject=Just click SEND">[eSubscribe]</a>
<a class="feed-link" href="list.cgi%3Flist=fosug&amp;cmd=feed">[Feed]</a>
</div>
<hr>
<div class=showthread-title><h1>fosug: Thread: bsd network bridge</h1></div>
<hr>
<table class=msgs><tr><td colspan=99 class=pager>
<span class="pager-first">[<<]</span>
<span class="pager-prev">[<]</span>
<span class="pager-curr">Page 1 of 1</span>
<span class="pager-next">[>]</span>
<span class="pager-last">[>>]</span>
</td></tr><tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: bsd network bridge">bsd network bridge</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=oecidgpomioaadbpdhcp&amp;month=200601.html">Keith Conley ####@####.####</a>
<br><b>Date:</b>
7 Jan 2006 04:08:34 -0000
<br><b>Message-Id:</b> &lt;43BF3EB2.6070005@drac0.net&gt;
<br>
<hr><pre>This is mostly for stevo...

Way back when before I moved out of Fresno into hurricane ally, you gave 
or talked about giving a presentation about using *BSD to do packet 
filtering or network traffic monitoring.

I'm in the position where I need to do something like this, can you 
point some URLs at me where I can find info about this?

Thanks,

Keith
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: bsd network bridge">Re: bsd network bridge</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=kllfcpgdhhehicjdgkme&amp;month=200601.html">Robert Nickel ####@####.####</a>
<br><b>Date:</b>
7 Jan 2006 06:28:37 -0000
<br><b>Message-Id:</b> &lt;20060107062821.GF4389@homebase.hsd1.ca.comcast.net))&gt;
<br>
<hr><pre>On 2006.01.06 22:08:18 -0600, Keith Conley wrote:
&gt; This is mostly for stevo...
&gt; 
&gt; Way back when before I moved out of Fresno into hurricane ally, you gave 
&gt; or talked about giving a presentation about using *BSD to do packet 
&gt; filtering or network traffic monitoring.
&gt; 
&gt; I'm in the position where I need to do something like this, can you 
&gt; point some URLs at me where I can find info about this?

This is a noble cause, but I would suggest something simpler to start.  You
can look at smoothwall [0] or some other canned solution or you can buy a
router that has this functionality built in [1] already.

--Robert

[0] <a href="http://www.smoothwall.org/">http://www.smoothwall.org/</a>
[1] This is what stevo is doing at work last time I checked.
</pre>
<hr><strong>[Content type application/pgp-signature not shown. <a href="list.cgi/fosug/854/3.html">Download</a>]</strong><br>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: bsd network bridge">Re: bsd network bridge</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=oecidgpomioaadbpdhcp&amp;month=200601.html">Keith Conley ####@####.####</a>
<br><b>Date:</b>
7 Jan 2006 06:50:08 -0000
<br><b>Message-Id:</b> &lt;43BF648E.1030808@drac0.net&gt;
<br>
<hr><pre>Robert Nickel wrote:

&gt;On 2006.01.06 22:08:18 -0600, Keith Conley wrote:
&gt;  
&gt;
&gt;&gt;This is mostly for stevo...
&gt;&gt;
&gt;&gt;Way back when before I moved out of Fresno into hurricane ally, you gave 
&gt;&gt;or talked about giving a presentation about using *BSD to do packet 
&gt;&gt;filtering or network traffic monitoring.
&gt;&gt;
&gt;&gt;I'm in the position where I need to do something like this, can you 
&gt;&gt;point some URLs at me where I can find info about this?
&gt;&gt;    
&gt;&gt;
&gt;
&gt;This is a noble cause, but I would suggest something simpler to start.  You
&gt;can look at smoothwall [0] or some other canned solution or you can buy a
&gt;router that has this functionality built in [1] already.
&gt;
&gt;--Robert
&gt;
&gt;[0] <a href="http://www.smoothwall.org/">http://www.smoothwall.org/</a>
&gt;[1] This is what stevo is doing at work last time I checked.
&gt;  
&gt;
Well... Here's the issue.  At work, the management has deemed it an 
issue that people are spending way too much time surfing the internet 
vs. working.  As an example, in less then 1 week, we had one branch who 
registered literally just under 10000 hits to one web site alone.  I 
checked the computers there and they aren't infected with spyware, and 
they aren't getting popups etc. to generate that kind of traffic.  Upon 
loging onto the computer, and looking at the IE history, these guys are 
doing nada but surfing and can't possibly have time to do their work.  
(custom car web sites, NFL chearleader pages, professional models' web 
pages and the like.  Very little work related cached pages...) We've 
since then blocked the sites by way of the firewall (SonicWall.)

Our SonicWall firewalls don't offer a means of logging what computer 
went where at what time, unless the site is specifically blocked.  Then 
it gets recorded to the log file and it emails an alert to me. 

I've been tasked with finding a way to track this traffic.  I've 
suggested that we set up a caching proxy server, but I've been shot 
down, plus I've been given a budget of $0 to do this.  So, I'm thinking 
of something that I can slip between our router and the rest of the 
network to capture and log the network traffic...

Since most of my experiance is with web servers and not so much network 
analysis, I need to learn what I need to do to impliment something like 
this.  Maybe you have a better solution.  I can't remove our SonicWall 
and replace it with a smoothwall linux box because the SonicWalls are 
what we use to create the VPN Connections needed to keep 6 of our 9 our 
remote branches connected.  The other 3 are connected through a Frame 
Relay connection.

Thanks,

Keith

</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: bsd network bridge">Re: bsd network bridge</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=dbfcabnmmpgfbdibogec&amp;month=200601.html">####@####.####</a>
<br><b>Date:</b>
7 Jan 2006 18:23:36 -0000
<br><b>Message-Id:</b> &lt;MAIL1rB0Xn2Pi1Y7PeG00000155@mail1.it-email.com&gt;
<br>
<hr><pre>I would suggest squid proxy if you're looking to control your staff . That way you have way more control on what their surfing on . Plus if you add mysql into it the mix and some pretty nice reporting tools  !  You have a great solution .....


-----Original Message-----

From:  Keith Conley ####@####.####
Subj:  Re: bsd network bridge
Date:  Fri Jan 6, 2006 10:49 pm
Size:  2K
To:  Robert Nickel ####@####.####
cc:  ####@####.####

Robert Nickel wrote:

&gt;On 2006.01.06 22:08:18 -0600, Keith Conley wrote:
&gt;  
&gt;
&gt;&gt;This is mostly for stevo...
&gt;&gt;
&gt;&gt;Way back when before I moved out of Fresno into hurricane ally, you gave 
&gt;&gt;or talked about giving a presentation about using *BSD to do packet 
&gt;&gt;filtering or network traffic monitoring.
&gt;&gt;
&gt;&gt;I'm in the position where I need to do something like this, can you 
&gt;&gt;point some URLs at me where I can find info about this?
&gt;&gt;    
&gt;&gt;
&gt;
&gt;This is a noble cause, but I would suggest something simpler to start.  You
&gt;can look at smoothwall [0] or some other canned solution or you can buy a
&gt;router that has this functionality built in [1] already.
&gt;
&gt;--Robert
&gt;
&gt;[0] <a href="http://www.smoothwall.org/">http://www.smoothwall.org/</a>
&gt;[1] This is what stevo is doing at work last time I checked.
&gt;  
&gt;
Well... Here's the issue.  At work, the management has deemed it an 
issue that people are spending way too much time surfing the internet 
vs. working.  As an example, in less then 1 week, we had one branch who 
registered literally just under 10000 hits to one web site alone.  I 
checked the computers there and they aren't infected with spyware, and 
they aren't getting popups etc. to generate that kind of traffic.  Upon 
loging onto the computer, and looking at the IE history, these guys are 
doing nada but surfing and can't possibly have time to do their work.  
(custom car web sites, NFL chearleader pages, professional models' web 
pages and the like.  Very little work related cached pages...) We've 
since then blocked the sites by way of the firewall (SonicWall.)

Our SonicWall firewalls don't offer a means of logging what computer 
went where at what time, unless the site is specifically blocked.  Then 
it gets recorded to the log file and it emails an alert to me. 

I've been tasked with finding a way to track this traffic.  I've 
suggested that we set up a caching proxy server, but I've been shot 
down, plus I've been given a budget of $0 to do this.  So, I'm thinking 
of something that I can slip between our router and the rest of the 
network to capture and log the network traffic...

Since most of my experiance is with web servers and not so much network 
analysis, I need to learn what I need to do to impliment something like 
this.  Maybe you have a better solution.  I can't remove our SonicWall 
and replace it with a smoothwall linux box because the SonicWalls are 
what we use to create the VPN Connections needed to keep 6 of our 9 our 
remote branches connected.  The other 3 are connected through a Frame 
Relay connection.

Thanks,

Keith


</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: bsd network bridge">Re: bsd network bridge</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=kllfcpgdhhehicjdgkme&amp;month=200601.html">Robert Nickel ####@####.####</a>
<br><b>Date:</b>
7 Jan 2006 19:24:00 -0000
<br><b>Message-Id:</b> &lt;20060107192353.GH4389@homebase.hsd1.ca.comcast.net))&gt;
<br>
<hr><pre>On 2006.01.07 10:21:00 -0800, ####@####.#### wrote:
&gt; I would suggest squid proxy if you're looking to control your staff . That
&gt; way you have way more control on what their surfing on . Plus if you add
&gt; mysql into it the mix and some pretty nice reporting tools  !  You have a
&gt; great solution .....

I would concur with Mike here.

It's quite simple to put the proxy in place, and you can start it out as a
transparent proxy.

Additionally, if your clients dhcp for their ip addresses, I would start by
locking down dhcp so that your clients always get the same IP address.  If you
would like the setup for this, I have it in-place at my work and will gladly
forward all the pertinent details, the mysql db schema and all the php pages
for the administrative front-end.

The combination of squid and the ability to lookup ip addresses and know who
the primary user is just rocks.

I don't know if you have any way to push registry settings or programs on your
users, but you can force the proxy issue in IE if you can push the registry
settings.  We use Zenworks at the City and I have not investigated other ways
of doing the same with free software (or if there is such a beast).  Probably
the easiest part is to use the registry program to silently insert said
settings via a login script (I forget what the program is called and would
have to investigate - someone here probably knows off the top of their dome).

If you can get management buyin, you can block 80 outbound at the firewall for
all boxen but your squid box and then turn on authentication on the squid box.
It's truly alarming how big a reduction in usage we saw when we turned on
authentication at Water.  It finally hit home that they were tagging all of
their web traffic with personally identifiable information.  Also, if someone
else provably is using their credentials, it's a policy violation for them to
have given said credentials out to someone else.  Nice, tight little net.

--Robert
</pre>
<hr><strong>[Content type application/pgp-signature not shown. <a href="list.cgi/fosug/858/3.html">Download</a>]</strong><br>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: bsd network bridge">Re: bsd network bridge</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=oecidgpomioaadbpdhcp&amp;month=200601.html">Keith Conley ####@####.####</a>
<br><b>Date:</b>
7 Jan 2006 20:18:30 -0000
<br><b>Message-Id:</b> &lt;43C0220D.8030808@drac0.net&gt;
<br>
<hr><pre>Robert Nickel wrote:

&gt;On 2006.01.07 10:21:00 -0800, ####@####.#### wrote:
&gt;  
&gt;
&gt;I would concur with Mike here.
&gt;
&gt;It's quite simple to put the proxy in place, and you can start it out as a
&gt;transparent proxy.
&gt;
&gt;Additionally, if your clients dhcp for their ip addresses, I would start by
&gt;locking down dhcp so that your clients always get the same IP address.  If you
&gt;would like the setup for this, I have it in-place at my work and will gladly
&gt;forward all the pertinent details, the mysql db schema and all the php pages
&gt;for the administrative front-end.
&gt;
&gt;The combination of squid and the ability to lookup ip addresses and know who
&gt;the primary user is just rocks.
&gt;
&gt;I don't know if you have any way to push registry settings or programs on your
&gt;users, but you can force the proxy issue in IE if you can push the registry
&gt;settings.  We use Zenworks at the City and I have not investigated other ways
&gt;of doing the same with free software (or if there is such a beast).  Probably
&gt;the easiest part is to use the registry program to silently insert said
&gt;settings via a login script (I forget what the program is called and would
&gt;have to investigate - someone here probably knows off the top of their dome).
&gt;
&gt;If you can get management buyin, you can block 80 outbound at the firewall for
&gt;all boxen but your squid box and then turn on authentication on the squid box.
&gt;It's truly alarming how big a reduction in usage we saw when we turned on
&gt;authentication at Water.  It finally hit home that they were tagging all of
&gt;their web traffic with personally identifiable information.  Also, if someone
&gt;else provably is using their credentials, it's a policy violation for them to
&gt;have given said credentials out to someone else.  Nice, tight little net.
&gt;
&gt;--Robert
&gt;  
&gt;
Cool, thanks for the Info guys.  I'll be looking at squid and I'd love 
to get that info from you, Robert for the dhcp set up too.
Ntop looks like a pretty good tool, but after setting it up and watching 
it, it's more for finding where your bandwidth is going, though it looks 
like it will be a valuable tool as well.

We are currently running a windows domain network using Win2k server and 
looking at upgrading to win2k server.  They let me use what I want for 
my web servers since only the hardware costs anything and since I&quot;m 
building my boxes, it's a lot less then buying a premade server!  Anyway 
- Great info.

Thanks,

Keith
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: bsd network bridge">Re: bsd network bridge</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=jjaibmhcgncgkcebgmfd&amp;month=200601.html">Stevo ####@####.####</a>
<br><b>Date:</b>
7 Jan 2006 21:08:13 -0000
<br><b>Message-Id:</b> &lt;b9bd1f4d0601071308q82508f6tcd2c477e28b1744a@mail.gmail.com&gt;
<br>
<hr><pre>On 1/7/06, Robert Nickel ####@####.#### wrote:
[...]
&gt; The combination of squid and the ability to lookup ip addresses and know who
&gt; the primary user is just rocks.
&gt;
&gt; I don't know if you have any way to push registry settings or programs on your
&gt; users, but you can force the proxy issue in IE if you can push the registry
&gt; settings.  We use Zenworks at the City and I have not investigated other ways
&gt; of doing the same with free software (or if there is such a beast).  Probably
&gt; the easiest part is to use the registry program to silently insert said
&gt; settings via a login script (I forget what the program is called and would
&gt; have to investigate - someone here probably knows off the top of their dome).

<a href="http://www.wlug.org.nz/WPAD">http://www.wlug.org.nz/WPAD</a>

this link might help. I use this type of configuration via dhcp
domainname value and an internal webserver along with squid and
dansguardian... works well for me, that along with my mail relay...  I
haven't caught a virus yet, other than a sqeeker that finds it's way
through every once in a while.

<a href="http://dansguardian.org/">http://dansguardian.org/</a>

The bridge is where you may want to monitor bandwidth usage. There are
kernel modules that allow this type of thing along with userspace
utilities so you can log traffic statistics.

I block every outgoing port, and if it's going through port 80, it's
redirected through the proxy where it monitors traffic usage, and ALSO
blocks out unwanted extensions and MIME types.

I haven't set up a system with dhcp like Robert has, but that's more
along the lines of laziness than anything else.

Hope this helps,

~ stevo
</pre>

<tr><td class=msgsitem><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: bsd network bridge">Re: bsd network bridge</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=gijaamjlfkifepcbpgdn&amp;month=200601.html">Dennis Aston ####@####.####</a>
<br><b>Date:</b>
8 Jan 2006 22:41:12 -0000
<br><b>Message-Id:</b> &lt;6f562f8f0601081440j2d9d71d2y2c520636f3537c22@mail.gmail.com&gt;
<br>
<hr><pre>In a pure windows environment with 2000 Pro/Server (or higher), proxy
settings can be managed out of Group Policy.  Go to the group policy you
want to apply this to (probably the default domain policy in this case, so
it will apply to the entire domain) and open it for editing.  Choose User
Configuration, then Windows Settings, Internet Explorer Maintenance,
Connection, and finally Proxy Settings.

On 1/7/06, Robert Nickel ####@####.#### wrote:
&gt;
&gt; On 2006.01.07 10:21:00 -0800, ####@####.#### wrote:
&gt; &gt; I would suggest squid proxy if you're looking to control your staff .
&gt; That
&gt; &gt; way you have way more control on what their surfing on . Plus if you add
&gt; &gt; mysql into it the mix and some pretty nice reporting tools  !  You have
&gt; a
&gt; &gt; great solution .....
&gt;
&gt; I would concur with Mike here.
&gt;
&gt; It's quite simple to put the proxy in place, and you can start it out as a
&gt; transparent proxy.
&gt;
&gt; Additionally, if your clients dhcp for their ip addresses, I would start
&gt; by
&gt; locking down dhcp so that your clients always get the same IP address.  If
&gt; you
&gt; would like the setup for this, I have it in-place at my work and will
&gt; gladly
&gt; forward all the pertinent details, the mysql db schema and all the php
&gt; pages
&gt; for the administrative front-end.
&gt;
&gt; The combination of squid and the ability to lookup ip addresses and know
&gt; who
&gt; the primary user is just rocks.
&gt;
&gt; I don't know if you have any way to push registry settings or programs on
&gt; your
&gt; users, but you can force the proxy issue in IE if you can push the
&gt; registry
&gt; settings.  We use Zenworks at the City and I have not investigated other
&gt; ways
&gt; of doing the same with free software (or if there is such a
&gt; beast).  Probably
&gt; the easiest part is to use the registry program to silently insert said
&gt; settings via a login script (I forget what the program is called and would
&gt; have to investigate - someone here probably knows off the top of their
&gt; dome).
&gt;
&gt; If you can get management buyin, you can block 80 outbound at the firewall
&gt; for
&gt; all boxen but your squid box and then turn on authentication on the squid
&gt; box.
&gt; It's truly alarming how big a reduction in usage we saw when we turned on
&gt; authentication at Water.  It finally hit home that they were tagging all
&gt; of
&gt; their web traffic with personally identifiable information.  Also, if
&gt; someone
&gt; else provably is using their credentials, it's a policy violation for them
&gt; to
&gt; have given said credentials out to someone else.  Nice, tight little net.
&gt;
&gt; --Robert
&gt;
&gt;
&gt;
</pre>

<tr><td colspan=99 class=pager>
<span class="pager-first">[<<]</span>
<span class="pager-prev">[<]</span>
<span class="pager-curr">Page 1 of 1</span>
<span class="pager-next">[>]</span>
<span class="pager-last">[>>]</span>
</td></tr></table><hr><div class=menubar>
<a class="menu-lists" href="list.cgi.html">[Lists]</a>
<a class="menu-config" href="list.cgi%3Flist=fosug&amp;cmd=configure.html">[Configure]</a>
<a class="menu-first" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200410.html">[<<]</a>
<a class="menu-prev" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200512.html">[<]</a>
<a class="menu-bythread" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200601.html">[by Thread]</a>
<a class="menu-bydate" href="list.cgi%3Flist=fosug&amp;cmd=monthbydate&amp;month=200601.html">[by Date]</a>
<a class="menu-next" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200603.html">[>]</a>
<a class="menu-last" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200607.html">[>>]</a>
<a class="menu-months" href="list.cgi%3Flist=fosug&amp;cmd=months.html">[Months]</a>
<a class="menu-search" href="list.cgi%3Flist=fosug&amp;cmd=search.html">[Search]</a>
<a class="menu-subscribe" href="mailto:fosug-subscribe@fosug.org?subject=Just click SEND">[eSubscribe]</a>
<a class="feed-link" href="list.cgi%3Flist=fosug&amp;cmd=feed">[Feed]</a>
</div>

<hr>
<div class=versioninfo>
Powered by
<a href="http://untroubled.org/ezmlm-browse/">ezmlm-browse 0.10</a>.
</div>
</body>
</html>
