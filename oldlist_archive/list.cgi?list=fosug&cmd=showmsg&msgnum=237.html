<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
<head>
<link href="../list/browse.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="list.cgi%3Flist=fosug&amp;cmd=feed&amp;feedtype=rss2" />
<link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="list.cgi%3Flist=fosug&amp;cmd=feed&amp;feedtype=atom" />
<title>fosug: rm command</title>
<meta NAME="robots" CONTENT="noindex">
<meta NAME="robots" CONTENT="nofollow">
<base href="">
</head>
<body class=msg-body>
<div class=menubar>
<a class="menu-lists" href="list.cgi.html">[Lists]</a>
<a class="menu-config" href="list.cgi%3Flist=fosug&amp;cmd=configure.html">[Configure]</a>
<a class="menu-first" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200410.html">[<<]</a>
<a class="menu-prev" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200502.html">[<]</a>
<a class="menu-bythread" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200503.html">[by Thread]</a>
<a class="menu-bydate" href="list.cgi%3Flist=fosug&amp;cmd=monthbydate&amp;month=200503.html">[by Date]</a>
<a class="menu-next" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200504.html">[>]</a>
<a class="menu-last" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200607.html">[>>]</a>
<a class="menu-months" href="list.cgi%3Flist=fosug&amp;cmd=months.html">[Months]</a>
<a class="menu-search" href="list.cgi%3Flist=fosug&amp;cmd=search.html">[Search]</a>
<a class="menu-subscribe" href="mailto:fosug-subscribe@fosug.org?subject=Just click SEND">[eSubscribe]</a>
<a class="feed-link" href="list.cgi%3Flist=fosug&amp;cmd=feed">[Feed]</a>
</div>
<hr>
<div class=msg-title><h1>fosug: rm command</h1></div>
<hr>
<div class=msg><table class=msgmenu>

<tr class=msgmenu-prevbydate>
<td class=msgmenu-label>Previous by date:</td>
<td class=msgmenu-value>5 Mar 2005 08:39:14 -0000 <a class="subject" href="list.cgi%3Flist=fosug&amp;cmd=showmsg&amp;msgnum=236.html">Re: rm command</a>, <a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=kllfcpgdhhehicjdgkme.html">Robert Nickel</a></td>
</tr>

<tr class=msgmenu-nextbydate>
<td class=msgmenu-label>Next by date:</td>
<td class=msgmenu-value>5 Mar 2005 08:39:14 -0000 <a class="subject" href="list.cgi%3Flist=fosug&amp;cmd=showmsg&amp;msgnum=238.html">Dinner Reminder :-) Shanghai @ 8pm</a>, <a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=jjaibmhcgncgkcebgmfd.html">Stevo</a></td>
</tr>

<tr class=msgmenu-prevbythread>
<td class=msgmenu-label>Previous in thread:</td>
<td class=msgmenu-value>5 Mar 2005 08:39:14 -0000 <a class="subject" href="list.cgi%3Flist=fosug&amp;cmd=showmsg&amp;msgnum=236.html">Re: rm command</a>, <a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=kllfcpgdhhehicjdgkme.html">Robert Nickel</a></td>
</tr>

<tr class=msgmenu-nextbythread>
<td class=msgmenu-label>Next in thread:</td>
<td class=msgmenu-value>5 Mar 2005 08:39:14 -0000 <a class="subject" href="list.cgi%3Flist=fosug&amp;cmd=showmsg&amp;msgnum=239.html">Re: rm command</a>, <a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=kllfcpgdhhehicjdgkme.html">Robert Nickel</a></td>
</tr>

</table>
<hr><b>Subject:</b>
<a href="mailto:fosug@fosug.org?subject=Re: Re: rm command">Re: rm command</a>
<br><b>From:</b>
<a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=oecidgpomioaadbpdhcp&amp;month=200503.html">Keith Conley ####@####.####</a>
<br><b>Date:</b>
5 Mar 2005 08:39:14 -0000
<br><b>Message-Id:</b> &lt;422970A6.4030701@drac0.net&gt;
<br>
<hr><pre>Robert Nickel wrote:

&gt;On 2005.03.04 13:09:55 +0000, Robert Nickel wrote:
&gt;  
&gt;
&gt;&gt;find ./ -type f -printf &quot;'%h/%f'\n&quot; | \ 
&gt;&gt;sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)$/d' | \
&gt;&gt;xargs -i rm -f {}
&gt;&gt;    
&gt;&gt;
&gt;--Robert
&gt;
&gt;  
&gt;
Alright, so I finally got a chance to run this on my directory... Here's 
what happened:

reports]# find ./ -type f -printf &quot;'%h/%f'\n&quot; | \
 &gt; sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)$/d' | \
 &gt; xargs -i rm -f {}
xargs: unmatched single quote

I started googling around and found that this error is happening because 
there are probably files in one or possibley all directories that have a 
' (single quote) in the file name.

Using &quot;'%h/%f\'\n&quot; works, but appends a ' to the end of every file name.
I also found out that -print0 will do the same thing as what you are 
doing with -printf &quot;'%h/%f'\n&quot;.  Are there any pros or cons to doing it 
one way or the other?
I noticed that there is no -i for xargs... I'm assuming the -i was to 
make it interactive.  The -p or --interactive options make it interactive.

I ran the script again, it went through 28500 or so files, but nothing 
was deleted.

find ./ -type f -print0 | \
sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)$/d' | \
xargs -p rm -f {}

When running the script without rm -f {} outputs everything to /bin/echo 
by default.  Here is what the output looks like from the above script 
(without rm -f {}):

./Customer Sales/Paulis Lawnmower Sales History.xls 01017391 01017456 
08004408.eml POs/ 01011182 &amp; 01011055.eml 01014767 &amp; 01014845.eml POs/ 
01015229, 08003948, 01015135.eml 01017558.eml POs/ 01017966.eml 
01018534.eml POs/ 01019512.eml 01020799.eml POs/ 02004008.eml 08004175, 
01016184, 01016185.eml POs/ PO 01011563.eml PO 01011804.eml POs/ PO 
01012235.eml PO 01012570.eml POs/ PO 01015484.eml PO 01016756 &amp; 
01016679.eml POs/ PO 01016944.eml PO 01017230.eml POs/ PO 01018169.eml 
PO 01018913.eml POs/ PO 08003355.eml RA 23456.eml POs/01009031.eml 
POs/01009744 .eml .eml POs/01015772.eml POs/01017669.eml 
POs/01020083.eml POs/01020560.eml POs/01021427.eml POs/08004560, 
08004537, 08004536, 01018247.eml POs/08004911.eml POs/2-stroke 
campaign.eml Dealer Survey.eml POs/Booking Discount.eml Promotion.eml 
POs/DROP SHIPS.eml POs/ECHO Parts.eml

  Should each file be listed seperately on it's own line? 

I tried it with xargs --null because the xargs man page says that 
-print0 produces input suitable for --null. 

find ./ -type f -print0 | \
sed -e '/\.\(html\?\|asp\|php\|txt\|rpt\|jpg\|pdf\|ps\|gif\)$/d' | \
xargs --null rm -f {}

This actually deleted ALL contents from the directories, including those 
that need to be excluded.

I'm pretty tired now and I feel like I'm going to go blind reading man 
pages... lol  I've learned a lot tonight, but do you have any 
recommendations on what I should try next?

Thanks,

Keith
</pre>

<hr><table class=msgmenu>

<tr class=msgmenu-prevbydate>
<td class=msgmenu-label>Previous by date:</td>
<td class=msgmenu-value>5 Mar 2005 08:39:14 -0000 <a class="subject" href="list.cgi%3Flist=fosug&amp;cmd=showmsg&amp;msgnum=236.html">Re: rm command</a>, <a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=kllfcpgdhhehicjdgkme.html">Robert Nickel</a></td>
</tr>

<tr class=msgmenu-nextbydate>
<td class=msgmenu-label>Next by date:</td>
<td class=msgmenu-value>5 Mar 2005 08:39:14 -0000 <a class="subject" href="list.cgi%3Flist=fosug&amp;cmd=showmsg&amp;msgnum=238.html">Dinner Reminder :-) Shanghai @ 8pm</a>, <a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=jjaibmhcgncgkcebgmfd.html">Stevo</a></td>
</tr>

<tr class=msgmenu-prevbythread>
<td class=msgmenu-label>Previous in thread:</td>
<td class=msgmenu-value>5 Mar 2005 08:39:14 -0000 <a class="subject" href="list.cgi%3Flist=fosug&amp;cmd=showmsg&amp;msgnum=236.html">Re: rm command</a>, <a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=kllfcpgdhhehicjdgkme.html">Robert Nickel</a></td>
</tr>

<tr class=msgmenu-nextbythread>
<td class=msgmenu-label>Next in thread:</td>
<td class=msgmenu-value>5 Mar 2005 08:39:14 -0000 <a class="subject" href="list.cgi%3Flist=fosug&amp;cmd=showmsg&amp;msgnum=239.html">Re: rm command</a>, <a class="author" href="list.cgi%3Flist=fosug&amp;cmd=author&amp;authorid=kllfcpgdhhehicjdgkme.html">Robert Nickel</a></td>
</tr>

</table>
</div><hr><div class=menubar>
<a class="menu-lists" href="list.cgi.html">[Lists]</a>
<a class="menu-config" href="list.cgi%3Flist=fosug&amp;cmd=configure.html">[Configure]</a>
<a class="menu-first" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200410.html">[<<]</a>
<a class="menu-prev" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200502.html">[<]</a>
<a class="menu-bythread" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200503.html">[by Thread]</a>
<a class="menu-bydate" href="list.cgi%3Flist=fosug&amp;cmd=monthbydate&amp;month=200503.html">[by Date]</a>
<a class="menu-next" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200504.html">[>]</a>
<a class="menu-last" href="list.cgi%3Flist=fosug&amp;cmd=monthbythread&amp;month=200607.html">[>>]</a>
<a class="menu-months" href="list.cgi%3Flist=fosug&amp;cmd=months.html">[Months]</a>
<a class="menu-search" href="list.cgi%3Flist=fosug&amp;cmd=search.html">[Search]</a>
<a class="menu-subscribe" href="mailto:fosug-subscribe@fosug.org?subject=Just click SEND">[eSubscribe]</a>
<a class="feed-link" href="list.cgi%3Flist=fosug&amp;cmd=feed">[Feed]</a>
</div>

<hr>
<div class=versioninfo>
Powered by
<a href="http://untroubled.org/ezmlm-browse/">ezmlm-browse 0.10</a>.
</div>
</body>
</html>
